<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>百人一首展示</title>
  <link rel="stylesheet" href="styles.css">
  <meta property="og:title" content="五色百人一首・決まり字攻略ツール">
  <meta property="og:description" content="決まり字のハイライト表示、友札の瞬時検索。競技かるたの暗記に特化した練習ツールです。">
  <meta property="og:image" content="https://happyface0v0.github.io/waka/thumbnail.jpg">
  <meta property="og:image:type" content="image/jpeg">
  <meta property="og:image:width" content="493">
  <meta property="og:image:height" content="493">
  <meta property="og:url" content="https://happyface0v0.github.io">
  <meta property="og:type" content="website">
</head>
<body>

    <div class="container">
        <h1>百人一首</h1>

        <div class="guide-panel" id="guidePanel">
            <div class="guide-header">
                <span>📖 百人一首 攻略ガイド</span>
                <button id="closeGuide">了解！</button>
            </div>
            
            <div class="guide-content">
                <div class="guide-intro">
                    <h4>💡 「決まり字」を覚えるのが上達の近道！</h4>
                    <p>上の句を数文字聞いただけで、取るべき札が1枚に決まる「最短の文字数」を<strong>決まり字</strong>と呼びます。</p>
                    <p class="example-text">
                        <strong>一字決まりの例：</strong><br>
                        「む・す・め・ふ・さ・ほ・せ」で始まる札は各1枚。最初の1文字目を聞いた瞬間に札を狙えます。
                    </p>
                </div>

                <div class="guide-steps">
                    <div class="step">
                        <span class="step-icon">⚡</span>
                        <div class="step-desc">
                            <p><strong>ハイライトを暗記の目安に</strong></p>
                            <p>札に表示された<span class="highlight-inline">色付きの文字</span>が、その札の<strong>決まり字</strong>です。下線の引かれた文字まで聞けば、下の句が確定します。</p>
                        </div>
                    </div>
                    
                    <div class="step">
                        <span class="step-icon">🎯</span>
                        <div class="step-desc">
                            <p><strong>「友札（ともふだ）」に注意！</strong></p>
                            <p><strong>決まり字</strong>をタップすると、途中まで同じ文字で始まる札（友札）を一覧表示します。これらをセットで覚えると、お手つきを減らせます。</p>
                        </div>
                    </div>

                    <div class="step">
                        <span class="step-icon">📜</span>
                        <div class="step-desc">
                            <p><strong>漢字と色の意味</strong></p>
                            <p>左の<strong>番号</strong>をタップすると漢字版の札を確認できます。番号の背景色は、五色百人一首の各グループ（20枚）の色に対応しています。</p>
                        </div>
                    </div>

                    <div class="step">
                        <span class="step-icon">🔍</span>
                        <div class="step-desc">
                            <p><strong>決まり字優先検索</strong></p>
                            <p>検索窓にひらがなを入力すると、<strong>決まり字</strong>が一致する札を優先して表示します。練習したい札をすぐに見つけられます。</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="controls-toolbar">
            <div class="control-group">
                <label for="sortSelect">並び替え:</label>
                <select id="sortSelect">
                    <option value="fiveColors">五色順</option>
                    <option value="default">番号順</option>
                    <option value="kanaFirst">上句(あいうえお)</option>
                    <option value="kimarijiFirst">上句(決まり字順)</option>
                    <option value="kanaSecond">下句(あいうえお)</option>
                    <option value="kimarijiSecond">下句(決まり字順)</option>
                </select>
            </div>

            <div class="control-group search-group">
                <input type="text" id="searchInput" placeholder="仮名・番号で検索 (例: あ / 15)..." autocomplete="off">
                <span id="searchCount" class="search-count"></span>
            </div>
        </div>

        <!-- 詩のリスト -->
        <div class="poem-list"></div>
    </div>

  <!-- 弹窗容器 -->
    <div id="kimarijiPopup" class="kimariji-popup">
        <div class="kimariji-popup-content">
            <span id="kimarijiClose" class="kimariji-close">&times;</span>

            <div id="kanjiCardContent" style="display: none;"></div>

            <div id="similarListContent" style="display: none;">
                <h2 id="popupTitle">類似の決まり字を含む歌</h2>
                <div id="kimarijiPoemsList" class="kimariji-poem-list"></div>
            </div>
        </div>
    </div>

  <script src="script.js"></script>
</body>
</html>
