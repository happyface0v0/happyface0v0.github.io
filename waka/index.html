<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>百人一首展示</title>
  <link rel="stylesheet" href="styles.css">
  <meta property="og:title" content="五色百人一首・決まり字攻略ツール">
  <meta property="og:description" content="決まり字のハイライト表示、友札の瞬時検索。競技かるたの暗記に特化した練習ツールです。">
  <meta property="og:image" content="https://happyface0v0.github.io/waka/thumbnail.jpg">
  <meta property="og:image:type" content="image/jpeg">
  <meta property="og:image:width" content="493">
  <meta property="og:image:height" content="493">
  <meta property="og:url" content="https://happyface0v0.github.io">
  <meta property="og:type" content="website">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;700;900&display=swap" rel="stylesheet">
</head>

<nav class="main-nav">
    <a href="shiren/index.html" class="nav-item">試練</a>
    <a href="#" class="nav-item active">歌一覧</a> 
    <a href="#" class="nav-item">記録</a>
</nav>

<body>
    <div id="page-exit-overlay" class="exit-overlay"></div>

    <div class="container">
        <h1>百人一首</h1>

        <div class="guide-panel" id="guidePanel">
            <div class="guide-header">
                <span class="guide-title">百人一首：勝機を掴む心得</span>
                <button id="closeGuide" class="minimal-btn">了解！</button>
            </div>
    
            <div class="guide-content">
                <section class="guide-section">
                    <h4 class="section-label">最速の攻め：決まり字</h4>
                    <p>
                        詠み上げの際、<b>「その文字まで聞けば、下の句が1枚に特定できる」</b>最短の文字数を決まり字と呼びます。
                        各札で<span class="highlight-inline"><b>ハイライト<span class="last-char">部分</span></b></span>表示されている部分がその目印です。
                    </p>
                    <div class="theory-box">
                        <span class="theory-title">【一字決まり：反射の極意】</span>
                        <p>
                            「む・す・め・ふ・さ・ほ・せ」の7首は、<b>最初の一音目</b>を聞いた瞬間に札が確定します。
                            これらを真っ先に覚えることで、実戦での「反応速度」が劇的に向上します。
                        </p>
                    </div>
                </section>

                <div class="guide-grid">
                    <div class="guide-item">
                        <h5>練度の記録（マーキング）</h5>
                        <p>歌の左側にある<b>「円形マーク」</b>をタップし、習得状況を記録・管理します。</p>
                        <ul class="status-list">
                            <li><span class="dot-yellow"></span> <strong>修行中</strong>：暗記が不完全な札</li>
                            <li><span class="dot-green"></span> <strong>皆伝</strong>：反射で取れる札</li>
                        </ul>
                    </div>

                    <div class="guide-item">
                        <h5>効率的な修練</h5>
                        <p>ナビの「試練」では、記録した練度（黄色・緑色）を指定して集中的に練習できます。苦手な札（黄色）だけを抽出して追い込みましょう。</p>
                    </div>
                    
                    <div class="guide-item">
                        <h5>友札を封鎖する</h5>
                        <p>札の<span class="highlight-inline"><b>ハイライト<span class="last-char">部分</span></b></span>をタップすると、聞き分けが必要な「友札」を一覧表示します。似た札をセットで覚えることがお手つきを根絶する近道です。</p>
                    </div>

                    <div class="guide-item">
                        <h5>漢字版への転換</h5>
                        <p>
                            左端の<b><span class="meta-inline color-b">番号</span>（五色対応）</b>をタップすると、
                            即座に漢字表記に切り替わります。歌の情景を理解し、記憶の定着を早めます。
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <div class="controls-toolbar">
            <div class="control-group">
                <label for="sortSelect">並び替え:</label>
                <select id="sortSelect">
                    <option value="fiveColors">五色順</option>
                    <option value="default">番号順</option>
                    <option value="kanaFirst">上句(あいうえお)</option>
                    <option value="kimarijiFirst">上句(決まり字順)</option>
                    <option value="kanaSecond">下句(あいうえお)</option>
                    <option value="kimarijiSecond">下句(決まり字順)</option>
                </select>
            </div>

            <div class="control-group progress-actions">
                <button onclick="exportProgress()" class="action-btn export-btn" title="学習進捗を文字列としてコピー">
                    <span></span> 書き出し
                </button>
                <button onclick="importProgress()" class="action-btn import-btn" title="進捗文字列を読み込む">
                    <span></span> 読み込み
                </button>
            </div>

            <div class="control-group search-group">
                <input type="text" id="searchInput" placeholder="仮名・番号で検索 (例: あ / 15)..." autocomplete="off">
                <span id="searchCount" class="search-count"></span>
            </div>
        </div>

        <!-- 詩のリスト -->
        <div class="poem-list"></div>
    </div>

  <!-- 弹窗容器 -->
    <div id="kimarijiPopup" class="kimariji-popup">
        <div class="kimariji-popup-content">
            <span id="kimarijiClose" class="kimariji-close">&times;</span>

            <div id="kanjiCardContent" style="display: none;"></div>

            <div id="similarListContent" style="display: none;">
                <h2 id="popupTitle">類似の決まり字を含む歌</h2>
                <div id="kimarijiPoemsList" class="kimariji-poem-list"></div>
            </div>
        </div>
    </div>

    
  <script src="shiren/data.js"></script>
  <script src="script.js"></script>
</body>
</html>
